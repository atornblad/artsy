(function(){function W(){g&&(window.clearTimeout(g),g=null);this.removeEventListener("progress",C,!1);L(this)}function C(){g&&window.clearTimeout(g);var a=this;g=window.setTimeout(function(){g=null;a.removeEventListener("progress",C,!1);L(a)},2E3)}function L(a){for(var b=[],c=0;c<n.length;++c)n[c]!=a&&b.push(n[c]);n=b;a=document.createEvent("Event");a.initEvent("itemsLoader",!0,!0);a.total=s;a.c=s-n.length;window.dispatchEvent(a)}function X(){y=this.currentTime}function Y(){z=!0;M(N)}function N(a){if(D){E=
(a-O)/1E3*60;F=a-D;var b=P[G];b&&F>=b.b&&(++G,b=P[G]);if(b){var m=F-b.a,q=m/(b.b-b.a);Q=Z[b.d];var e=(new Date).getTime();c.globalAlpha=1;c.save();Q.call(this,b.e,m,q,E);c.restore()}else z=!1;b=(22-((new Date).getTime()-e)-10*E)/200;0<b&&(b*=0.005);b=R+b;1<b?b=1:0.1>b&&(b=0.1);R=b}y&&(1>y&&(D=a-1E3*y-250),O=a);z?M(N):(a=document.createEvent("Event"),a.initEvent("demoDone",!0,!0),window.dispatchEvent(a))}function S(a){var b=new THREE.PlaneGeometry(2E3,2E3,10,10);a=new THREE.Mesh(b,new THREE.MeshBasicMaterial({color:a}));
a.rotation.x=-0.5*Math.PI;return a}function T(a,b,c){for(var q=$(-7,8,-4,-7,8,4,-7,4,8,-7,-4,8,-7,-8,4,-7,-8,-4,-7,-4,-8,-7,4,-8,-7,0,0,7,8,-4,7,8,4,7,4,8,7,-4,8,7,-8,4,7,-8,-4,7,-4,-8,7,4,-8,7,0,0,-6,2,-1,-6,2,1,-6,1,2,-6,-1,2,-6,-2,1,-6,-2,-1,-6,-1,-2,-6,1,-2,6,2,-1,6,2,1,6,1,2,6,-1,2,6,-2,1,6,-2,-1,6,-1,-2,6,1,-2,-2,4,-2,-2,4,2,-2,2,3,-2,-2,3,-2,-4,2,-2,-4,-2,-2,-2,-3,-2,2,-3,2,4,-2,2,4,2,2,2,3,2,-2,3,2,-4,2,2,-4,-2,2,-2,-3,2,2,-3),e=new THREE.Geometry,d=0;d<q.length;++d)e.vertices.push(q[d]);
q=[t(11823665),t(13797955),t(11307910),t(9005668),t(9389598)];for(d=0;7>=d;++d){k(e,d,8,(d+1)%8,d%2);k(e,d+9,(d+1)%8+9,17,d%2);var f=d,l=(d+1)%8+18,h=d+18;k(e,f,(d+1)%8,l,d%2+2);k(e,l,h,f,d%2+2);var g=d+9,f=(d+1)%8+26,n=d+26;k(e,g,f,(d+1)%8+9,d%2+2);k(e,f,g,n,d%2+2);var g=d+34,p=(d+1)%8+34;k(e,h,l,p,3-d%2);k(e,p,g,h,3-d%2);l=d+42;h=(d+1)%8+42;k(e,n,h,f,3-d%2);k(e,h,n,l,3-d%2);k(e,g,p,h,d%2*4);k(e,h,l,g,d%2*4)}e=new THREE.Mesh(e,new THREE.MeshFaceMaterial(q));e.position={x:a,y:b,z:c};return e}function k(a,
b,c,f,e){a.faces.push(new THREE.Face3(b,c,f,null,null,e))}function $(a){for(var b=[],c=0;c<arguments.length;c+=3)b.push(new THREE.Vector3(arguments[c],arguments[c+1],arguments[c+2]));return b}function t(a){var b="#"+a.toString(16);if(H[b])return H[b];a=new THREE.MeshBasicMaterial({color:a});return H[b]=a}var F=0,E=1,M=function(a,b,c){for(var f=0;f<a.length;++f){var e=a[f];if(b[e])return b[e]}return c}(["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],window,function(a){var b=
(new Date).getTime(),b=b-b%17+17-b;5>b&&(b=17);window.setTimeout(function(){a.call(window,(new Date).getTime())},b)});Math.max(320,256);var I,c,R,O,D,y,G=0,Q,z,U,u,J,V,h,v=[],l,H=[],p,f,w,K,aa='ARTSY (and slightly insane);;;;;;;Pure JavaScript!;;Chrome, Safari, FireFox, iOS Safari, IE9+;(yes, even IE);;No Flash or Silverlight needed!;;;;;;;Code:;;       LBRTW;;Original design:;;       Mr. Pet;       Chaos;       McDeal;;Graphics:;;       Ra;;Music:;;       Moby;;;;;;;Thanks must go to:;;mrdoob (and all the others who contribute to Three.js), everyone I knew back in the old Demo Scene days, Google (for making a kick-ass browser);;;;;;;Some words about the demo:;;The name "Artsy (and slightly Insane)" is of course a tribute to the names of the original demo and the amazing group who made it.;;The very first scene I wrote was the "disc tunnel" effect, and I was instantly so pleased with the results that I decided to give a full remake a serious try.;;After the first two parts were done, I showed some people what I had done, and it got really nice reception. Unfortunately I had no time at the moment to finish part three.;;So the demo was left hanging for almost six months, when I finally managed to free up some time for "pleasure coding" again. :);;;;;;;This is the only part that takes advantage of WebGL (through Three.js). All other parts are 100 % hand-coded JavaScript.;;I did use some of the original graphics that were easy to get hold of using screen dumps.'.split(";"),
A=1,B=0,x=0,Z=[function(a,b){p||(p=document.createElement("CANVAS"),p.width=256,p.height=1088,f=p.getContext("2d"),f.fillStyle="#ffffff",f.textBaseline="top",w=document.createElement("CANVAS"),w.width=256,w.height=1088,K=w.getContext("2d"));c.clearRect(0,0,640,512);if(0!=a){switch(a){case 1:h.position.x=40*Math.sin(b/1100);h.position.z=40*Math.cos(b/1100);h.position.y=200+30*Math.sin(b/950);h.up=new THREE.Vector3(0.4*Math.sin(b/1E3+0.7),1,0.7*Math.sin(b/1300+1.1));h.lookAt(v[0].position);l.setClearColor("#0b46d2",
1);l.render(u,h);break;case 2:l.setClearColor("#003f79",1);l.render(J,h);break;case 3:l.setClearColor("#0b46d2",1),l.render(V,h)}c.drawImage(l.domElement,0,0);K.clearRect(0,0,256,1088);K.drawImage(p,0,0);f.clearRect(0,0,256,1088);f.drawImage(w,0,-1);--A;if(0>=A){var m=aa[B];A=39;if("string"==typeof m){0==B?(f.font="bold normal 30px sans-serif",A=48,f.fillStyle="#ff9900"):(f.font="normal normal 26px sans-serif",f.fillStyle="#ffffff");var m=m.substr(x),g=f.measureText(m).width;if(252<g){var e=m.split(" ");
if(1<e.length)for(var d=[],k=0;k<e.length;++k){if(d.push(e[k]),g=f.measureText(d.join(" ")).width,252<g){0==k?m=e[0]:(d.length-=1,m=d.join(" "));x+=m.length+1;break}}else x=0,B++}else x=0,B++;f.fillText(m,4,1024)}}c.drawImage(p,0,0,256,1024,512,0,128,512);c.font="normal normal 15px sans-serif";c.textBaseline="top";c.textAlign="center";c.fillStyle="#000000";c.shadowColor="#ffffff";c.shadowOffsetX=0;c.shadowOffsetY=0;c.shadowBlur=10;c.fillText("this part is obviously not finished yet",256,15)}}],P=
[{a:0,b:2E3,d:0,e:0},{a:2E3,b:53180,d:0,e:1},{a:53180,b:105840,d:0,e:2},{a:105840,b:155E3,d:0,e:3}],n=[],s=0,g=null,r=null;onLoadingDone=function(){r&&(window.clearTimeout(r),r=null);u=new THREE.Scene;h=new THREE.PerspectiveCamera(50,1,0.1,1E3);l=new THREE.WebGLRenderer;l.setSize(512,512);l.g=!0;v.push(T(0,190,0));u.add(v[0]);v.push(T(10,180,50));u.add(v[1]);u.add(S(4222512));J=new THREE.Scene;J.add(S(3039881));V=new THREE.Scene;U.play()};onItemsLoader=function(a){r&&(window.clearTimeout(r),r=null);
c.fillStyle="#000000";c.fillRect(0,0,640,512);c.fillStyle="#000073";c.strokeStyle="#000073";c.lineWidth=50;c.lineCap="round";c.beginPath();c.moveTo(120,256);c.lineTo(520,256);c.stroke();a.c<a.total&&(c.strokeStyle="#000000",c.lineWidth=40,c.beginPath(),c.moveTo(120,256),c.lineTo(520,256),c.stroke(),c.strokeStyle="#000073",c.lineWidth=41,c.beginPath(),c.moveTo(120,256),c.lineTo(120+400*a.c/a.total,256),c.stroke());a.c==a.total&&(c.textAlign="center",c.textBaseline="middle",c.font="20px sans-serif",
c.fillText("Click to start...",320,296),window.setTimeout(onLoadingDone,1),I.addEventListener("click",onLoadingDone,!1))};onDemoDone=function(){window.location.href="/part-3/"};onload=function(){I=document.getElementById("demo");c=I.getContext("2d");z=!1;window.addEventListener("itemsLoader",onItemsLoader,!1);var a=document.createElement("AUDIO");a.controls=!0;a.f="auto";n.push(a);++s;var b=document.createEvent("Event");b.initEvent("itemsLoader",!0,!0);b.total=s;b.c=s-n.length;window.dispatchEvent(b);
a.addEventListener("play",Y,!1);a.addEventListener("timeupdate",X,!1);a.addEventListener("progress",C,!1);a.addEventListener("canplay",W,!1);var b=a.canPlayType("audio/ogg"),f=a.canPlayType("audio/mpeg");if("probably"==b||"maybe"==b&&"probably"!=f)a.src="mobyle.ogg";else if("probably"==f||"maybe"==f)a.src="mobyle.mp3";a.load();U=a};window.onload=onload})();