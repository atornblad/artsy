(function(){function T(){m&&(window.clearTimeout(m),m=null);this.removeEventListener("progress",z,!1);J(this)}function z(){m&&window.clearTimeout(m);var b=this;m=window.setTimeout(function(){m=null;b.removeEventListener("progress",z,!1);J(b)},2E3)}function J(b){for(var a=[],c=0;c<l.length;++c)l[c]!=b&&a.push(l[c]);l=a;b=document.createEvent("Event");b.initEvent("itemsLoader",!0,!0);b.total=q;b.c=q-l.length;window.dispatchEvent(b)}function U(){u=this.currentTime}function V(){v=!0;K(L)}function L(b){if(A){B=
(b-M)/1E3*60;C=b-A;var a=N[D];a&&C>=a.b&&(++D,a=N[D]);if(a){var c=C-a.a,W=c/(a.b-a.a);O=X[a.d];var h=(new Date).getTime();d.globalAlpha=1;d.save();O.call(this,a.e,c,W,B);d.restore()}else v=!1;a=(22-((new Date).getTime()-h)-10*B)/200;0<a&&(a*=0.005);a=P+a;1<a?a=1:0.1>a&&(a=0.1);P=a}u&&(1>u&&(A=b-1E3*u-250),M=b);v?K(L):(b=document.createEvent("Event"),b.initEvent("demoDone",!0,!0),window.dispatchEvent(b))}function Q(b){var a=new THREE.PlaneGeometry(2E3,2E3,10,10);b=new THREE.Mesh(a,new THREE.MeshBasicMaterial({color:b}));
b.rotation.x=-0.5*Math.PI;return b}function Y(){for(var b=[new THREE.Vector3(-7,8,-4),new THREE.Vector3(-7,8,4),new THREE.Vector3(-7,4,8),new THREE.Vector3(-7,-4,8),new THREE.Vector3(-7,-8,4),new THREE.Vector3(-7,-8,-4),new THREE.Vector3(-7,-4,-8),new THREE.Vector3(-7,4,-8),new THREE.Vector3(-7,0,0),new THREE.Vector3(7,8,-4),new THREE.Vector3(7,8,4),new THREE.Vector3(7,4,8),new THREE.Vector3(7,-4,8),new THREE.Vector3(7,-8,4),new THREE.Vector3(7,-8,-4),new THREE.Vector3(7,-4,-8),new THREE.Vector3(7,
4,-8),new THREE.Vector3(7,0,0),new THREE.Vector3(-6,2,-1),new THREE.Vector3(-6,2,1),new THREE.Vector3(-6,1,2),new THREE.Vector3(-6,-1,2),new THREE.Vector3(-6,-2,1),new THREE.Vector3(-6,-2,-1),new THREE.Vector3(-6,-1,-2),new THREE.Vector3(-6,1,-2),new THREE.Vector3(6,2,-1),new THREE.Vector3(6,2,1),new THREE.Vector3(6,1,2),new THREE.Vector3(6,-1,2),new THREE.Vector3(6,-2,1),new THREE.Vector3(6,-2,-1),new THREE.Vector3(6,-1,-2),new THREE.Vector3(6,1,-2),new THREE.Vector3(-2,4,-2),new THREE.Vector3(-2,
4,2),new THREE.Vector3(-2,2,3),new THREE.Vector3(-2,-2,3),new THREE.Vector3(-2,-4,2),new THREE.Vector3(-2,-4,-2),new THREE.Vector3(-2,-2,-3),new THREE.Vector3(-2,2,-3),new THREE.Vector3(2,4,-2),new THREE.Vector3(2,4,2),new THREE.Vector3(2,2,3),new THREE.Vector3(2,-2,3),new THREE.Vector3(2,-4,2),new THREE.Vector3(2,-4,-2),new THREE.Vector3(2,-2,-3),new THREE.Vector3(2,2,-3)],a=new THREE.Geometry,c=0;c<b.length;++c)a.vertices.push(b[c]);b=[r(11823665),r(13797955),r(11307910),r(9005668),r(9389598)];
for(c=0;7>=c;++c){a.faces.push(new THREE.Face3(c,8,(c+1)%8,null,null,c%2));a.faces.push(new THREE.Face3(c+9,(c+1)%8+9,17,null,null,(c+1)%2));var d=c,h=(c+1)%8+18,f=c+18;a.faces.push(new THREE.Face3(d,(c+1)%8,h,null,null,c%2+2));a.faces.push(new THREE.Face3(h,f,d,null,null,c%2+2));var e=c+9,d=(c+1)%8+26,g=c+26;a.faces.push(new THREE.Face3(e,d,(c+1)%8+9,null,null,c%2+2));a.faces.push(new THREE.Face3(d,e,g,null,null,c%2+2));var e=c+34,k=(c+1)%8+34;a.faces.push(new THREE.Face3(f,h,k,null,null,3-c%2));
a.faces.push(new THREE.Face3(k,e,f,null,null,3-c%2));h=c+42;f=(c+1)%8+42;a.faces.push(new THREE.Face3(g,f,d,null,null,3-c%2));a.faces.push(new THREE.Face3(f,g,h,null,null,3-c%2));a.faces.push(new THREE.Face3(e,k,f,null,null,c%2*4));a.faces.push(new THREE.Face3(f,h,e,null,null,c%2*4))}a=new THREE.Mesh(a,new THREE.MeshFaceMaterial(b));a.position={x:0,y:190,z:0};return a}function r(b){var a="#"+b.toString(16);if(E[a])return E[a];b=new THREE.MeshBasicMaterial({color:b});return E[a]=b}var C=0,B=1,K=function(b,
a,c){for(var d=0;d<b.length;++d){var e=b[d];if(a[e])return a[e]}return c}(["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame"],window,function(b){var a=(new Date).getTime(),a=a-a%17+17-a;5>a&&(a=17);window.setTimeout(function(){b.call(window,(new Date).getTime())},a)});Math.max(320,256);var F,d,P,M,A,u,D=0,O,v,R,w,G,S,k,H=[],g,E=[],n,e,s,I,Z='ARTSY (and slightly insane);;;;;;;Pure JavaScript!;;Chrome, Safari, FireFox, iOS Safari, IE9+;(yes, even IE);;No Flash or Silverlight needed!;;;;;;;Code:;;       LBRTW;;Original design:;;       Mr. Pet;       Chaos;       McDeal;;Graphics:;;       Ra;;Music:;;       Moby;;;;;;;Thanks must go to:;;mrdoob (and all the others who contribute to Three.js), everyone I knew back in the old Demo Scene days, Google (for making a kick-ass browser);;;;;;;Some words about the demo:;;The name "Artsy (and slightly Insane)" is of course a tribute to the names of the original demo and the amazing group who made it.;;The very first scene I wrote was the "disc tunnel" effect, and I was instantly so pleased with the results that I decided to give a full remake a serious try.;;After the first two parts were done, I showed some people what I had done, and it got really nice reception. Unfortunately I had no time at the moment to finish part three.;;So the demo was left hanging for almost six months, when I finally managed to free up some time for "pleasure coding" again. :);;;;;;;This is the only part that takes advantage of WebGL (through Three.js). All other parts are 100 % hand-coded JavaScript.;;I did use some of the original graphics that were easy to get hold of using screen dumps.'.split(";"),
x=1,y=0,t=0,X=[function(b,a){n||(n=document.createElement("CANVAS"),n.width=256,n.height=1088,e=n.getContext("2d"),e.fillStyle="#ffffff",e.textBaseline="top",s=document.createElement("CANVAS"),s.width=256,s.height=1088,I=s.getContext("2d"));d.clearRect(0,0,640,512);if(0!=b){switch(b){case 1:k.position.x=40*Math.sin(a/1100);k.position.z=40*Math.cos(a/1100);k.position.y=200+30*Math.sin(a/950);k.h=new THREE.Vector3(0.4*Math.sin(a/1E3+0.7),1,0.7*Math.sin(a/1300+1.1));k.lookAt(H[0].position);g.setClearColor("#0b46d2",
1);g.render(w,k);break;case 2:g.setClearColor("#003f79",1);g.render(G,k);break;case 3:g.setClearColor("#0b46d2",1),g.render(S,k)}d.drawImage(g.domElement,0,0);I.clearRect(0,0,256,1088);I.drawImage(n,0,0);e.clearRect(0,0,256,1088);e.drawImage(s,0,-1);--x;if(0>=x){var c=Z[y];x=39;if("string"==typeof c){0==y?(e.font="bold normal 30px sans-serif",x=48,e.fillStyle="#ff9900"):(e.font="normal normal 26px sans-serif",e.fillStyle="#ffffff");var c=c.substr(t),m=e.measureText(c).width;if(252<m){var h=c.split(" ");
if(1<h.length)for(var f=[],l=0;l<h.length;++l){if(f.push(h[l]),m=e.measureText(f.join(" ")).width,252<m){0==l?c=h[0]:(f.length-=1,c=f.join(" "));t+=c.length+1;break}}else t=0,y++}else t=0,y++;e.fillText(c,4,1024)}}d.drawImage(n,0,0,256,1024,512,0,128,512);d.font="normal normal 15px sans-serif";d.textBaseline="top";d.textAlign="center";d.fillStyle="#000000";d.shadowColor="#ffffff";d.shadowOffsetX=0;d.shadowOffsetY=0;d.shadowBlur=10;d.fillText("this part is obviously not finished yet",256,15)}}],N=
[{a:0,b:2E3,d:0,e:0},{a:2E3,b:53180,d:0,e:1},{a:53180,b:105840,d:0,e:2},{a:105840,b:155E3,d:0,e:3}],l=[],q=0,m=null,p=null;onLoadingDone=function(){p&&(window.clearTimeout(p),p=null);w=new THREE.Scene;k=new THREE.PerspectiveCamera(50,1,0.1,1E3);g=new THREE.WebGLRenderer;g.setSize(512,512);g.g=!0;H.push(Y());w.add(H[0]);w.add(Q(4222512));G=new THREE.Scene;G.add(Q(3039881));S=new THREE.Scene;R.play()};onItemsLoader=function(b){p&&(window.clearTimeout(p),p=null);d.fillStyle="#000000";d.fillRect(0,0,
640,512);d.fillStyle="#000073";d.strokeStyle="#000073";d.lineWidth=50;d.lineCap="round";d.beginPath();d.moveTo(120,256);d.lineTo(520,256);d.stroke();b.c<b.total&&(d.strokeStyle="#000000",d.lineWidth=40,d.beginPath(),d.moveTo(120,256),d.lineTo(520,256),d.stroke(),d.strokeStyle="#000073",d.lineWidth=41,d.beginPath(),d.moveTo(120,256),d.lineTo(120+400*b.c/b.total,256),d.stroke());b.c==b.total&&(d.textAlign="center",d.textBaseline="middle",d.font="20px sans-serif",d.fillText("Click to start...",320,296),
window.setTimeout(onLoadingDone,1),F.addEventListener("click",onLoadingDone,!1))};onDemoDone=function(){window.location.href="/part-3/"};onload=function(){F=document.getElementById("demo");d=F.getContext("2d");v=!1;window.addEventListener("itemsLoader",onItemsLoader,!1);var b=document.createElement("AUDIO");b.controls=!0;b.f="auto";l.push(b);++q;var a=document.createEvent("Event");a.initEvent("itemsLoader",!0,!0);a.total=q;a.c=q-l.length;window.dispatchEvent(a);b.addEventListener("play",V,!1);b.addEventListener("timeupdate",
U,!1);b.addEventListener("progress",z,!1);b.addEventListener("canplay",T,!1);var a=b.canPlayType("audio/ogg"),c=b.canPlayType("audio/mpeg");if("probably"==a||"maybe"==a&&"probably"!=c)b.src="mobyle.ogg";else if("probably"==c||"maybe"==c)b.src="mobyle.mp3";b.load();R=b};window.onload=onload})();